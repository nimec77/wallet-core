// SPDX-License-Identifier: Apache-2.0
//
// Copyright Â© 2017 Trust Wallet.
//
// This is a GENERATED FILE, changes made here WILL BE LOST.
//

import 'src/index.dart';
{{#if parts}}

part 'package:trust_wallet_core/src/common/any_signer.dart';
part 'package:trust_wallet_core/src/common/data_impl.dart';
part 'package:trust_wallet_core/src/common/string_impl.dart';
part 'package:trust_wallet_core/src/extensions/extensions.dart';
{{#each parts}}
part '{{this}}';
{{/each}}

{{/if}}
late final TrustWalletCoreBindings _bindings;

abstract final class TrustWalletCore {
    const TrustWalletCore._();

    static void init() {
        String dllPath = '';

        if (Platform.isMacOS || Platform.isIOS) {
            dllPath = 'WalletCore.framework/WalletCore';
        } else if (Platform.isAndroid) {
            dllPath = 'libTrustWalletCore.so';
        } else if (Platform.isWindows) {
            if (Platform.environment['PROCESSOR_ARCHITECTURE'] == 'AMD64' ||
                Platform.environment['PROCESSOR_ARCHITEW6432'] == 'AMD64') {
                dllPath = 'windows/libs/64/TrustWalletCore.dll';
            } else if (Platform.environment['PROCESSOR_ARCHITECTURE'] == 'ARM64') {
                dllPath = 'windows/libs/arm64/TrustWalletCore.dll';
            } else {
                dllPath = 'windows/libs/86/TrustWalletCore.dll';
            }
        }

        if (dllPath.isEmpty) {
            throw UnsupportedError('Unknown platform: ${Platform.operatingSystem}');
        }

        final library = DynamicLibrary.open(dllPath);
        _bindings = TrustWalletCoreBindings(library);
    }
}
