import 'dart:convert';
import 'dart:ffi';
import 'dart:typed_data';

import 'package:convert/convert.dart';
import 'package:ffi/ffi.dart';
import 'package:trust_wallet_core/bindings/generated_bindings.dart' show TWCoinType;

const _oneBtcInSatoshi = 100000000;

class Utils {
  Utils._();

  static Pointer<Char> toNativeChar(String string, {Allocator allocator = malloc}) {
    final units = utf8.encode(string);
    final Pointer<Uint8> result = allocator<Uint8>(units.length + 1);
    final Uint8List nativeString = result.asTypedList(units.length + 1);
    nativeString.setAll(0, units);
    nativeString[units.length] = 0;
    return result.cast<Char>();
  }

  static String bytesToHex(List<int> bytes) => hex.encode(Uint8List.fromList(bytes));

  static String btcToSatoshi(String btc) => (double.parse(btc) * _oneBtcInSatoshi).round().toString();

  static String satoshiToBtc(String satoshi) => (double.parse(satoshi) / _oneBtcInSatoshi).toString();

  static String getCoinName(TWCoinType coinType) => switch (coinType) {
        TWCoinType.TWCoinTypeAeternity => 'Aeternity',
        TWCoinType.TWCoinTypeAion => 'Aion',
        TWCoinType.TWCoinTypeBinance => 'Binance',
        TWCoinType.TWCoinTypeBitcoin => 'Bitcoin',
        TWCoinType.TWCoinTypeBitcoinCash => 'Bitcoin Cash',
        TWCoinType.TWCoinTypeBitcoinGold => 'Bitcoin Gold',
        TWCoinType.TWCoinTypeCallisto => 'Callisto',
        TWCoinType.TWCoinTypeCardano => 'Cardano',
        TWCoinType.TWCoinTypeCosmos => 'Cosmos',
        TWCoinType.TWCoinTypePivx => 'Pivx',
        TWCoinType.TWCoinTypeDash => 'Dash',
        TWCoinType.TWCoinTypeDecred => 'Decred',
        TWCoinType.TWCoinTypeDigiByte => 'DigiByte',
        TWCoinType.TWCoinTypeDogecoin => 'Dogecoin',
        TWCoinType.TWCoinTypeEOS => 'EOS',
        TWCoinType.TWCoinTypeWAX => 'WAX',
        TWCoinType.TWCoinTypeEthereum => 'Ethereum',
        TWCoinType.TWCoinTypeEthereumClassic => 'Ethereum Classic',
        TWCoinType.TWCoinTypeFIO => 'FIO',
        TWCoinType.TWCoinTypeGoChain => 'GoChain',
        TWCoinType.TWCoinTypeGroestlcoin => 'Groestlcoin',
        TWCoinType.TWCoinTypeICON => 'ICON',
        TWCoinType.TWCoinTypeIoTeX => 'IoTeX',
        TWCoinType.TWCoinTypeKava => 'Kava',
        TWCoinType.TWCoinTypeKin => 'Kin',
        TWCoinType.TWCoinTypeLitecoin => 'Litecoin',
        TWCoinType.TWCoinTypeMonacoin => 'Monacoin',
        TWCoinType.TWCoinTypeNebulas => 'Nebulas',
        TWCoinType.TWCoinTypeNULS => 'NULS',
        TWCoinType.TWCoinTypeNano => 'Nano',
        TWCoinType.TWCoinTypeNEAR => 'NEAR',
        TWCoinType.TWCoinTypeNimiq => 'Nimiq',
        TWCoinType.TWCoinTypeOntology => 'Ontology',
        TWCoinType.TWCoinTypePOANetwork => 'POA Network',
        TWCoinType.TWCoinTypeQtum => 'Qtum',
        TWCoinType.TWCoinTypeXRP => 'XRP',
        TWCoinType.TWCoinTypeSolana => 'Solana',
        TWCoinType.TWCoinTypeStellar => 'Stellar',
        TWCoinType.TWCoinTypeTezos => 'Tezos',
        TWCoinType.TWCoinTypeTheta => 'Theta',
        TWCoinType.TWCoinTypeThunderCore => 'ThunderCore',
        TWCoinType.TWCoinTypeNEO => 'NEO',
        TWCoinType.TWCoinTypeViction => 'Viction',
        TWCoinType.TWCoinTypeTron => 'Tron',
        TWCoinType.TWCoinTypeVeChain => 'VeChain',
        TWCoinType.TWCoinTypeViacoin => 'Viacoin',
        TWCoinType.TWCoinTypeWanchain => 'Wanchain',
        TWCoinType.TWCoinTypeZcash => 'Zcash',
        TWCoinType.TWCoinTypeFiro => 'Firo',
        TWCoinType.TWCoinTypeZilliqa => 'Zilliqa',
        TWCoinType.TWCoinTypeZelcash => 'Zelcash',
        TWCoinType.TWCoinTypeRavencoin => 'Ravencoin',
        TWCoinType.TWCoinTypeWaves => 'Waves',
        TWCoinType.TWCoinTypeTerra => 'Terra',
        TWCoinType.TWCoinTypeTerraV2 => 'TerraV2',
        TWCoinType.TWCoinTypeHarmony => 'Harmony',
        TWCoinType.TWCoinTypeAlgorand => 'Algorand',
        TWCoinType.TWCoinTypeKusama => 'Kusama',
        TWCoinType.TWCoinTypePolkadot => 'Polkadot',
        TWCoinType.TWCoinTypeFilecoin => 'Filecoin',
        TWCoinType.TWCoinTypeMultiversX => 'MultiversX',
        TWCoinType.TWCoinTypeBandChain => 'BandChain',
        TWCoinType.TWCoinTypeSmartChainLegacy => 'SmartChain Legacy',
        TWCoinType.TWCoinTypeSmartChain => 'SmartChain',
        TWCoinType.TWCoinTypeTBinance => 'TBinance',
        TWCoinType.TWCoinTypeOasis => 'Oasis',
        TWCoinType.TWCoinTypePolygon => 'Polygon',
        TWCoinType.TWCoinTypeTHORChain => 'THORChain',
        TWCoinType.TWCoinTypeBluzelle => 'Bluzelle',
        TWCoinType.TWCoinTypeOptimism => 'Optimism',
        TWCoinType.TWCoinTypeZksync => 'Zksync',
        TWCoinType.TWCoinTypeArbitrum => 'Arbitrum',
        TWCoinType.TWCoinTypeECOChain => 'ECOChain',
        TWCoinType.TWCoinTypeAvalancheCChain => 'Avalanche C-Chain',
        TWCoinType.TWCoinTypeXDai => 'XDai',
        TWCoinType.TWCoinTypeFantom => 'Fantom',
        TWCoinType.TWCoinTypeCryptoOrg => 'CryptoOrg',
        TWCoinType.TWCoinTypeCelo => 'Celo',
        TWCoinType.TWCoinTypeRonin => 'Ronin',
        TWCoinType.TWCoinTypeOsmosis => 'Osmosis',
        TWCoinType.TWCoinTypeECash => 'ECash',
        TWCoinType.TWCoinTypeIOST => 'IOST',
        TWCoinType.TWCoinTypeCronosChain => 'Cronos Chain',
        TWCoinType.TWCoinTypeSmartBitcoinCash => 'Smart Bitcoin Cash',
        TWCoinType.TWCoinTypeKuCoinCommunityChain => 'KuCoin Community Chain',
        TWCoinType.TWCoinTypeBitcoinDiamond => 'Bitcoin Diamond',
        TWCoinType.TWCoinTypeBoba => 'Boba',
        TWCoinType.TWCoinTypeSyscoin => 'Syscoin',
        TWCoinType.TWCoinTypeVerge => 'Verge',
        TWCoinType.TWCoinTypeZen => 'Zen',
        TWCoinType.TWCoinTypeMetis => 'Metis',
        TWCoinType.TWCoinTypeAurora => 'Aurora',
        TWCoinType.TWCoinTypeEvmos => 'Evmos',
        TWCoinType.TWCoinTypeNativeEvmos => 'Native Evmos',
        TWCoinType.TWCoinTypeMoonriver => 'Moonriver',
        TWCoinType.TWCoinTypeMoonbeam => 'Moonbeam',
        TWCoinType.TWCoinTypeKavaEvm => 'Kava Evm',
        TWCoinType.TWCoinTypeKlaytn => 'Klaytn',
        TWCoinType.TWCoinTypeMeter => 'Meter',
        TWCoinType.TWCoinTypeOKXChain => 'OKX Chain',
        TWCoinType.TWCoinTypeStratis => 'Stratis',
        TWCoinType.TWCoinTypeKomodo => 'Komodo',
        TWCoinType.TWCoinTypeNervos => 'Nervos',
        TWCoinType.TWCoinTypeEverscale => 'Everscale',
        TWCoinType.TWCoinTypeAptos => 'Aptos',
        TWCoinType.TWCoinTypeNebl => 'Nebl',
        TWCoinType.TWCoinTypeHedera => 'Hedera',
        TWCoinType.TWCoinTypeSecret => 'Secret',
        TWCoinType.TWCoinTypeNativeInjective => 'Native Injective',
        TWCoinType.TWCoinTypeAgoric => 'Agoric',
        TWCoinType.TWCoinTypeTON => 'TON',
        TWCoinType.TWCoinTypeSui => 'Sui',
        TWCoinType.TWCoinTypeStargaze => 'Stargaze',
        TWCoinType.TWCoinTypePolygonzkEVM => 'Polygon zkEVM',
        TWCoinType.TWCoinTypeJuno => 'Juno',
        TWCoinType.TWCoinTypeStride => 'Stride',
        TWCoinType.TWCoinTypeAxelar => 'Axelar',
        TWCoinType.TWCoinTypeCrescent => 'Crescent',
        TWCoinType.TWCoinTypeKujira => 'Kujira',
        TWCoinType.TWCoinTypeIoTeXEVM => 'IoTeX EVM',
        TWCoinType.TWCoinTypeNativeCanto => 'Native Canto',
        TWCoinType.TWCoinTypeComdex => 'Comdex',
        TWCoinType.TWCoinTypeNeutron => 'Neutron',
        TWCoinType.TWCoinTypeSommelier => 'Sommelier',
        TWCoinType.TWCoinTypeFetchAI => 'Fetch AI',
        TWCoinType.TWCoinTypeMars => 'Mars',
        TWCoinType.TWCoinTypeUmee => 'Umee',
        TWCoinType.TWCoinTypeCoreum => 'Coreum',
        TWCoinType.TWCoinTypeQuasar => 'Quasar',
        TWCoinType.TWCoinTypePersistence => 'Persistence',
        TWCoinType.TWCoinTypeAkash => 'Akash',
        TWCoinType.TWCoinTypeNoble => 'Noble',
        TWCoinType.TWCoinTypeScroll => 'Scroll',
        TWCoinType.TWCoinTypeRootstock => 'Rootstock',
        TWCoinType.TWCoinTypeThetaFuel => 'Theta Fuel',
        TWCoinType.TWCoinTypeConfluxeSpace => 'Conflux eSpace',
        TWCoinType.TWCoinTypeAcala => 'Acala',
        TWCoinType.TWCoinTypeAcalaEVM => 'Acala EVM',
        TWCoinType.TWCoinTypeOpBNB => 'OpBNB',
        TWCoinType.TWCoinTypeNeon => 'Neon',
        TWCoinType.TWCoinTypeBase => 'Base',
        TWCoinType.TWCoinTypeSei => 'Sei',
        TWCoinType.TWCoinTypeArbitrumNova => 'Arbitrum Nova',
        TWCoinType.TWCoinTypeLinea => 'Linea',
        TWCoinType.TWCoinTypeGreenfield => 'Greenfield',
        TWCoinType.TWCoinTypeMantle => 'Mantle',
        TWCoinType.TWCoinTypeZenEON => 'Zen EON',
        TWCoinType.TWCoinTypeInternetComputer => 'Internet Computer',
        TWCoinType.TWCoinTypeTia => 'Tia',
        TWCoinType.TWCoinTypeMantaPacific => 'Manta Pacific',
        TWCoinType.TWCoinTypeNativeZetaChain => 'Native Zeta Chain',
        TWCoinType.TWCoinTypeZetaEVM => 'Zeta EVM',
        TWCoinType.TWCoinTypeDydx => 'Dydx',
        TWCoinType.TWCoinTypeMerlin => 'Merlin',
        TWCoinType.TWCoinTypeLightlink => 'Lightlink',
        TWCoinType.TWCoinTypeBlast => 'Blast',
        TWCoinType.TWCoinTypeBounceBit => 'Bounce Bit',
        TWCoinType.TWCoinTypeZkLinkNova => 'ZkLink Nova',
      };

  // Generated by copilot
  static String getCoinTicker(TWCoinType coinType) => switch (coinType) {
        TWCoinType.TWCoinTypeAeternity => 'AE',
        TWCoinType.TWCoinTypeAion => 'AION',
        TWCoinType.TWCoinTypeBinance => 'BNB',
        TWCoinType.TWCoinTypeBitcoin => 'BTC',
        TWCoinType.TWCoinTypeBitcoinCash => 'BCH',
        TWCoinType.TWCoinTypeBitcoinGold => 'BTG',
        TWCoinType.TWCoinTypeCallisto => 'CLO',
        TWCoinType.TWCoinTypeCardano => 'ADA',
        TWCoinType.TWCoinTypeCosmos => 'ATOM',
        TWCoinType.TWCoinTypePivx => 'PIVX',
        TWCoinType.TWCoinTypeDash => 'DASH',
        TWCoinType.TWCoinTypeDecred => 'DCR',
        TWCoinType.TWCoinTypeDigiByte => 'DGB',
        TWCoinType.TWCoinTypeDogecoin => 'DOGE',
        TWCoinType.TWCoinTypeEOS => 'EOS',
        TWCoinType.TWCoinTypeWAX => 'WAX',
        TWCoinType.TWCoinTypeEthereum => 'ETH',
        TWCoinType.TWCoinTypeEthereumClassic => 'ETC',
        TWCoinType.TWCoinTypeFIO => 'FIO',
        TWCoinType.TWCoinTypeGoChain => 'GO',
        TWCoinType.TWCoinTypeGroestlcoin => 'GRS',
        TWCoinType.TWCoinTypeICON => 'ICX',
        TWCoinType.TWCoinTypeIoTeX => 'IOTX',
        TWCoinType.TWCoinTypeKava => 'KAVA',
        TWCoinType.TWCoinTypeKin => 'KIN',
        TWCoinType.TWCoinTypeLitecoin => 'LTC',
        TWCoinType.TWCoinTypeMonacoin => 'MONA',
        TWCoinType.TWCoinTypeNebulas => 'NAS',
        TWCoinType.TWCoinTypeNULS => 'NULS',
        TWCoinType.TWCoinTypeNano => 'NANO',
        TWCoinType.TWCoinTypeNEAR => 'NEAR',
        TWCoinType.TWCoinTypeNimiq => 'NIM',
        TWCoinType.TWCoinTypeOntology => 'ONT',
        TWCoinType.TWCoinTypePOANetwork => 'POA',
        TWCoinType.TWCoinTypeQtum => 'QTUM',
        TWCoinType.TWCoinTypeXRP => 'XRP',
        TWCoinType.TWCoinTypeSolana => 'SOL',
        TWCoinType.TWCoinTypeStellar => 'XLM',
        TWCoinType.TWCoinTypeTezos => 'XTZ',
        TWCoinType.TWCoinTypeTheta => 'THETA',
        TWCoinType.TWCoinTypeThunderCore => 'TT',
        TWCoinType.TWCoinTypeNEO => 'NEO',
        TWCoinType.TWCoinTypeViction => 'VCT',
        TWCoinType.TWCoinTypeTron => 'TRX',
        TWCoinType.TWCoinTypeVeChain => 'VET',
        TWCoinType.TWCoinTypeViacoin => 'VIA',
        TWCoinType.TWCoinTypeWanchain => 'WAN',
        TWCoinType.TWCoinTypeZcash => 'ZEC',
        TWCoinType.TWCoinTypeFiro => 'FIRO',
        TWCoinType.TWCoinTypeZilliqa => 'ZIL',
        TWCoinType.TWCoinTypeZelcash => 'ZEL',
        TWCoinType.TWCoinTypeRavencoin => 'RVN',
        TWCoinType.TWCoinTypeWaves => 'WAVES',
        TWCoinType.TWCoinTypeTerra => 'LUNA',
        TWCoinType.TWCoinTypeTerraV2 => 'LUNA',
        TWCoinType.TWCoinTypeHarmony => 'ONE',
        TWCoinType.TWCoinTypeAlgorand => 'ALGO',
        TWCoinType.TWCoinTypeKusama => 'KSM',
        TWCoinType.TWCoinTypePolkadot => 'DOT',
        TWCoinType.TWCoinTypeFilecoin => 'FIL',
        TWCoinType.TWCoinTypeMultiversX => 'XMC',
        TWCoinType.TWCoinTypeBandChain => 'BAND',
        TWCoinType.TWCoinTypeSmartChainLegacy => 'BNB',
        TWCoinType.TWCoinTypeSmartChain => 'BNB',
        TWCoinType.TWCoinTypeTBinance => 'BNB',
        TWCoinType.TWCoinTypeOasis => 'ROSE',
        TWCoinType.TWCoinTypePolygon => 'MATIC',
        TWCoinType.TWCoinTypeTHORChain => 'RUNE',
        TWCoinType.TWCoinTypeBluzelle => 'BLZ',
        TWCoinType.TWCoinTypeOptimism => 'OETH',
        TWCoinType.TWCoinTypeZksync => 'ZKS',
        TWCoinType.TWCoinTypeArbitrum => 'ARBETH',
        TWCoinType.TWCoinTypeECOChain => 'ECO',
        TWCoinType.TWCoinTypeAvalancheCChain => 'AVAX',
        TWCoinType.TWCoinTypeXDai => 'xDAI',
        TWCoinType.TWCoinTypeFantom => 'FTM',
        TWCoinType.TWCoinTypeCryptoOrg => 'COIN',
        TWCoinType.TWCoinTypeCelo => 'CELO',
        TWCoinType.TWCoinTypeRonin => 'RON',
        TWCoinType.TWCoinTypeOsmosis => 'OSMO',
        TWCoinType.TWCoinTypeECash => 'XEC',
        TWCoinType.TWCoinTypeIOST => 'IOST',
        TWCoinType.TWCoinTypeCronosChain => 'CRO',
        TWCoinType.TWCoinTypeSmartBitcoinCash => 'BCH',
        TWCoinType.TWCoinTypeKuCoinCommunityChain => 'KCC',
        TWCoinType.TWCoinTypeBitcoinDiamond => 'BCD',
        TWCoinType.TWCoinTypeBoba => 'BOBA',
        TWCoinType.TWCoinTypeSyscoin => 'SYS',
        TWCoinType.TWCoinTypeVerge => 'XVG',
        TWCoinType.TWCoinTypeZen => 'ZEN',
        TWCoinType.TWCoinTypeMetis => 'METIS',
        TWCoinType.TWCoinTypeAurora => 'AURORA',
        TWCoinType.TWCoinTypeEvmos => 'EVMOS',
        TWCoinType.TWCoinTypeNativeEvmos => 'EVMOS',
        TWCoinType.TWCoinTypeMoonriver => 'MOVR',
        TWCoinType.TWCoinTypeMoonbeam => 'GLMR',
        TWCoinType.TWCoinTypeKavaEvm => 'KAVA',
        TWCoinType.TWCoinTypeKlaytn => 'KLAY',
        TWCoinType.TWCoinTypeMeter => 'MTR',
        TWCoinType.TWCoinTypeOKXChain => 'OKT',
        TWCoinType.TWCoinTypeStratis => 'STRAX',
        TWCoinType.TWCoinTypeKomodo => 'KMD',
        TWCoinType.TWCoinTypeNervos => 'CKB',
        TWCoinType.TWCoinTypeEverscale => 'EVER',
        TWCoinType.TWCoinTypeAptos => 'APTOS',
        TWCoinType.TWCoinTypeNebl => 'NEBL',
        TWCoinType.TWCoinTypeHedera => 'HBAR',
        TWCoinType.TWCoinTypeSecret => 'SCRT',
        TWCoinType.TWCoinTypeNativeInjective => 'INJ',
        TWCoinType.TWCoinTypeAgoric => 'AGORIC',
        TWCoinType.TWCoinTypeTON => 'TON',
        TWCoinType.TWCoinTypeSui => 'SUI',
        TWCoinType.TWCoinTypeStargaze => 'STGZ',
        TWCoinType.TWCoinTypePolygonzkEVM => 'MATIC',
        TWCoinType.TWCoinTypeJuno => 'JUNO',
        TWCoinType.TWCoinTypeStride => 'STRIDE',
        TWCoinType.TWCoinTypeAxelar => 'AXL',
        TWCoinType.TWCoinTypeCrescent => 'CRS',
        TWCoinType.TWCoinTypeKujira => 'KUJIRA',
        TWCoinType.TWCoinTypeIoTeXEVM => 'IOTX',
        TWCoinType.TWCoinTypeNativeCanto => 'CANTO',
        TWCoinType.TWCoinTypeComdex => 'COMDEX',
        TWCoinType.TWCoinTypeNeutron => 'NEUTRON',
        TWCoinType.TWCoinTypeSommelier => 'SLP',
        TWCoinType.TWCoinTypeFetchAI => 'FET',
        TWCoinType.TWCoinTypeMars => 'MARS',
        TWCoinType.TWCoinTypeUmee => 'UMEE',
        TWCoinType.TWCoinTypeCoreum => 'COREUM',
        TWCoinType.TWCoinTypeQuasar => 'QUASAR',
        TWCoinType.TWCoinTypePersistence => 'XPRT',
        TWCoinType.TWCoinTypeAkash => 'AKT',
        TWCoinType.TWCoinTypeNoble => 'NOBL',
        TWCoinType.TWCoinTypeScroll => 'SCRL',
        TWCoinType.TWCoinTypeRootstock => 'RBTC',
        TWCoinType.TWCoinTypeThetaFuel => 'TFUEL',
        TWCoinType.TWCoinTypeConfluxeSpace => 'FLUX',
        TWCoinType.TWCoinTypeAcala => 'ACA',
        TWCoinType.TWCoinTypeAcalaEVM => 'ACA',
        TWCoinType.TWCoinTypeOpBNB => 'OPBNB',
        TWCoinType.TWCoinTypeNeon => 'NEON',
        TWCoinType.TWCoinTypeBase => 'BASE',
        TWCoinType.TWCoinTypeSei => 'SEI',
        TWCoinType.TWCoinTypeArbitrumNova => 'ANOV',
        TWCoinType.TWCoinTypeLinea => 'LINEA',
        TWCoinType.TWCoinTypeGreenfield => 'GREEN',
        TWCoinType.TWCoinTypeMantle => 'MANTLE',
        TWCoinType.TWCoinTypeZenEON => 'ZEON',
        TWCoinType.TWCoinTypeInternetComputer => 'ICP',
        TWCoinType.TWCoinTypeTia => 'TIA',
        TWCoinType.TWCoinTypeMantaPacific => 'MANTA',
        TWCoinType.TWCoinTypeNativeZetaChain => 'ZETA',
        TWCoinType.TWCoinTypeZetaEVM => 'ZETA',
        TWCoinType.TWCoinTypeDydx => 'DYDX',
        TWCoinType.TWCoinTypeMerlin => 'MERL',
        TWCoinType.TWCoinTypeLightlink => 'LLT',
        TWCoinType.TWCoinTypeBlast => 'BLAST',
        TWCoinType.TWCoinTypeBounceBit => 'BOUNCE',
        TWCoinType.TWCoinTypeZkLinkNova => 'ZKLN',
      };
}
