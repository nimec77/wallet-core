import 'dart:convert';
import 'dart:ffi';
import 'dart:typed_data';

import 'package:convert/convert.dart';
import 'package:ffi/ffi.dart';
import 'package:trust_wallet_core/trust_wallet_core.dart';

const _oneBtcInSatoshi = 100000000;

class Utils {
  Utils._();

  static Pointer<Char> toNativeChar(String string, {Allocator allocator = malloc}) {
    final units = utf8.encode(string);
    final Pointer<Uint8> result = allocator<Uint8>(units.length + 1);
    final Uint8List nativeString = result.asTypedList(units.length + 1);
    nativeString.setAll(0, units);
    nativeString[units.length] = 0;
    return result.cast<Char>();
  }

  static String bytesToHex(List<int> bytes) => hex.encode(Uint8List.fromList(bytes));

  static String btcToSatoshi(String btc) => (double.parse(btc) * _oneBtcInSatoshi).round().toString();

  static String satoshiToBtc(String satoshi) => (double.parse(satoshi) / _oneBtcInSatoshi).toString();

  static String getCoinName(CoinType coinType) => switch (coinType) {
        // CoinType.acala => 'Acala',
        // CoinType.acalaEVM => 'Acala EVM',
        CoinType.aeternity => 'Aeternity',
        CoinType.agoric => 'Agoric',
        CoinType.aion => 'Aion',
        CoinType.akash => 'Akash',
        CoinType.algorand => 'Algorand',
        CoinType.aptos => 'Aptos',
        CoinType.arbitrum => 'Arbitrum',
        // CoinType.arbitrumNova => 'Arbitrum Nova',
        CoinType.aurora => 'Aurora',
        CoinType.avalancheCChain => 'Avalanche C-Chain',
        CoinType.axelar => 'Axelar',
        CoinType.bandChain => 'BandChain',
        // CoinType.base => 'Base',
        CoinType.binance => 'Binance',
        CoinType.bitcoin => 'Bitcoin',
        CoinType.bitcoinCash => 'Bitcoin Cash',
        // CoinType.bitcoinDiamond => 'Bitcoin Diamond',
        CoinType.bitcoinGold => 'Bitcoin Gold',
        // CoinType.blast => 'Blast',
        CoinType.bluzelle => 'Bluzelle',
        CoinType.boba => 'Boba',
        // CoinType.bounceBit => 'Bounce Bit',
        CoinType.callisto => 'Callisto',
        CoinType.cardano => 'Cardano',
        CoinType.celo => 'Celo',
        CoinType.comdex => 'Comdex',
        // CoinType.confluxeSpace => 'Conflux eSpace',
        CoinType.coreum => 'Coreum',
        CoinType.cosmos => 'Cosmos',
        CoinType.crescent => 'Crescent',
        CoinType.cronosChain => 'Cronos Chain',
        CoinType.cryptoOrg => 'CryptoOrg',
        CoinType.dash => 'Dash',
        CoinType.decred => 'Decred',
        CoinType.digiByte => 'DigiByte',
        CoinType.dogecoin => 'Dogecoin',
        // CoinType.dydx => 'Dydx',
        CoinType.ecash => 'ECash',
        CoinType.ecochain => 'ECOChain',
        CoinType.eos => 'EOS',
        CoinType.ethereum => 'Ethereum',
        CoinType.ethereumClassic => 'Ethereum Classic',
        CoinType.everscale => 'Everscale',
        CoinType.evmos => 'Evmos',
        CoinType.fantom => 'Fantom',
        CoinType.fetchAI => 'Fetch AI',
        CoinType.filecoin => 'Filecoin',
        CoinType.fio => 'FIO',
        CoinType.firo => 'Firo',
        CoinType.goChain => 'GoChain',
        // CoinType.greenfield => 'Greenfield',
        CoinType.groestlcoin => 'Groestlcoin',
        CoinType.harmony => 'Harmony',
        CoinType.hedera => 'Hedera',
        CoinType.icon => 'ICON',
        // CoinType.internetComputer => 'Internet Computer',
        // CoinType.iost => 'IOST',
        CoinType.ioTeX => 'IoTeX',
        CoinType.ioTeXEVM => 'IoTeX EVM',
        CoinType.juno => 'Juno',
        CoinType.kava => 'Kava',
        CoinType.kavaEvm => 'Kava Evm',
        CoinType.kin => 'Kin',
        CoinType.klaytn => 'Klaytn',
        // CoinType.kLinkNova => 'ZkLink Nova',
        // CoinType.komodo => 'Komodo',
        CoinType.kuCoinCommunityChain => 'KuCoin Community Chain',
        CoinType.kujira => 'Kujira',
        CoinType.kusama => 'Kusama',
        // CoinType.lightlink => 'Lightlink',
        // CoinType.linea => 'Linea',
        CoinType.litecoin => 'Litecoin',
        // CoinType.mantaPacific => 'Manta Pacific',
        // CoinType.mantle => 'Mantle',
        CoinType.mars => 'Mars',
        // CoinType.merlin => 'Merlin',
        CoinType.meter => 'Meter',
        CoinType.metis => 'Metis',
        CoinType.monacoin => 'Monacoin',
        CoinType.moonbeam => 'Moonbeam',
        CoinType.moonriver => 'Moonriver',
        CoinType.multiversX => 'MultiversX',
        CoinType.nano => 'Nano',
        CoinType.nativeCanto => 'Native Canto',
        CoinType.nativeEvmos => 'Native Evmos',
        CoinType.nativeInjective => 'Native Injective',
        // CoinType.nativeZetaChain => 'Native Zeta Chain',
        CoinType.near => 'NEAR',
        // CoinType.nebl => 'Nebl',
        CoinType.nebulas => 'Nebulas',
        CoinType.neo => 'NEO',
        // CoinType.neon => 'Neon',
        CoinType.nervos => 'Nervos',
        CoinType.neutron => 'Neutron',
        CoinType.nimiq => 'Nimiq',
        CoinType.noble => 'Noble',
        CoinType.nuls => 'NULS',
        CoinType.oasis => 'Oasis',
        CoinType.okxchain => 'OKX Chain',
        CoinType.ontology => 'Ontology',
        // CoinType.opBNB => 'OpBNB',
        CoinType.optimism => 'Optimism',
        CoinType.osmosis => 'Osmosis',
        CoinType.persistence => 'Persistence',
        // CoinType.pivx => 'Pivx',
        CoinType.poanetwork => 'POA Network',
        CoinType.polkadot => 'Polkadot',
        CoinType.polygon => 'Polygon',
        CoinType.polygonzkEVM => 'Polygon zkEVM',
        CoinType.qtum => 'Qtum',
        CoinType.quasar => 'Quasar',
        CoinType.ravencoin => 'Ravencoin',
        CoinType.ronin => 'Ronin',
        // CoinType.rootstock => 'Rootstock',
        // CoinType.scroll => 'Scroll',
        CoinType.secret => 'Secret',
        // CoinType.sei => 'Sei',
        CoinType.smartBitcoinCash => 'Smart Bitcoin Cash',
        CoinType.smartChain => 'SmartChain',
        CoinType.smartChainLegacy => 'SmartChain Legacy',
        CoinType.solana => 'Solana',
        CoinType.solana => 'Stellar',
        CoinType.sommelier => 'Sommelier',
        CoinType.stargaze => 'Stargaze',
        // CoinType.stratis => 'Stratis',
        CoinType.stride => 'Stride',
        CoinType.sui => 'Sui',
        // CoinType.syscoin => 'Syscoin',
        // CoinType.tBinance => 'TBinance',
        CoinType.terra => 'Terra',
        CoinType.terraV2 => 'TerraV2',
        CoinType.tezos => 'Tezos',
        CoinType.theta => 'Theta',
        // CoinType.thetaFuel => 'Theta Fuel',
        CoinType.thorchain => 'THORChain',
        CoinType.thunderCore => 'ThunderCore',
        // CoinType.tia => 'Tia',
        CoinType.ton => 'TON',
        CoinType.tron => 'Tron',
        CoinType.umee => 'Umee',
        CoinType.veChain => 'VeChain',
        // CoinType.verge => 'Verge',
        CoinType.viacoin => 'Viacoin',
        // CoinType.viction => 'Viction',
        CoinType.wanchain => 'Wanchain',
        CoinType.waves => 'Waves',
        CoinType.wax => 'WAX',
        CoinType.xdai => 'XDai',
        CoinType.xrp => 'XRP',
        CoinType.zcash => 'Zcash',
        CoinType.zelcash => 'Zelcash',
        // CoinType.zen => 'Zen',
        // CoinType.zenEON => 'Zen EON',
        // CoinType.zetaEVM => 'Zeta EVM',
        CoinType.zilliqa => 'Zilliqa',
        CoinType.zksync => 'Zksync',
        CoinType.stellar => 'Stellar',
        CoinType.tomoChain => '',
      };

  // Generated by copilot
  static String getCoinTicker(CoinType coinType) => switch (coinType) {
        // CoinType.acala => 'ACA',
        // CoinType.acalaEVM => 'ACA',
        CoinType.aeternity => 'AE',
        CoinType.agoric => 'AGORIC',
        CoinType.aion => 'AION',
        CoinType.akash => 'AKT',
        CoinType.algorand => 'ALGO',
        CoinType.aptos => 'APTOS',
        CoinType.arbitrum => 'ARBETH',
        // CoinType.arbitrumNova => 'ANOV',
        CoinType.aurora => 'AURORA',
        CoinType.avalancheCChain => 'AVAX',
        CoinType.axelar => 'AXL',
        CoinType.bandChain => 'BAND',
        // CoinType.base => 'BASE',
        CoinType.binance => 'BNB',
        CoinType.bitcoin => 'BTC',
        CoinType.bitcoinCash => 'BCH',
        // CoinType.bitcoinDiamond => 'BCD',
        CoinType.bitcoinGold => 'BTG',
        // CoinType.blast => 'BLAST',
        CoinType.bluzelle => 'BLZ',
        CoinType.boba => 'BOBA',
        // CoinType.bounceBit => 'BOUNCE',
        CoinType.callisto => 'CLO',
        CoinType.cardano => 'ADA',
        CoinType.celo => 'CELO',
        CoinType.comdex => 'COMDEX',
        // CoinType.confluxeSpace => 'FLUX',
        CoinType.coreum => 'COREUM',
        CoinType.cosmos => 'ATOM',
        CoinType.crescent => 'CRS',
        CoinType.cronosChain => 'CRO',
        CoinType.cryptoOrg => 'COIN',
        CoinType.dash => 'DASH',
        CoinType.decred => 'DCR',
        CoinType.digiByte => 'DGB',
        CoinType.dogecoin => 'DOGE',
        // CoinType.dydx => 'DYDX',
        CoinType.ecash => 'XEC',
        CoinType.ecochain => 'ECO',
        CoinType.eos => 'EOS',
        CoinType.ethereum => 'ETH',
        CoinType.ethereumClassic => 'ETC',
        CoinType.everscale => 'EVER',
        CoinType.evmos => 'EVMOS',
        CoinType.fantom => 'FTM',
        CoinType.fetchAI => 'FET',
        CoinType.filecoin => 'FIL',
        CoinType.fio => 'FIO',
        CoinType.firo => 'FIRO',
        CoinType.goChain => 'GO',
        // CoinType.greenfield => 'GREEN',
        CoinType.groestlcoin => 'GRS',
        CoinType.harmony => 'ONE',
        CoinType.hedera => 'HBAR',
        CoinType.icon => 'ICX',
        // CoinType.internetComputer => 'ICP',
        // CoinType.iOST => 'IOST',
        CoinType.ioTeX => 'IOTX',
        CoinType.ioTeXEVM => 'IOTX',
        CoinType.juno => 'JUNO',
        CoinType.kava => 'KAVA',
        CoinType.kavaEvm => 'KAVA',
        CoinType.kin => 'KIN',
        CoinType.klaytn => 'KLAY',
        // CoinType.komodo => 'KMD',
        CoinType.kuCoinCommunityChain => 'KCC',
        CoinType.kujira => 'KUJIRA',
        CoinType.kusama => 'KSM',
        // CoinType.lightlink => 'LLT',
        // CoinType.linea => 'LINEA',
        CoinType.litecoin => 'LTC',
        // CoinType.mantaPacific => 'MANTA',
        // CoinType.mantle => 'MANTLE',
        CoinType.mars => 'MARS',
        // CoinType.merlin => 'MERL',
        CoinType.meter => 'MTR',
        CoinType.metis => 'METIS',
        CoinType.monacoin => 'MONA',
        CoinType.moonbeam => 'GLMR',
        CoinType.moonriver => 'MOVR',
        CoinType.multiversX => 'XMC',
        CoinType.nano => 'NANO',
        CoinType.nativeCanto => 'CANTO',
        CoinType.nativeEvmos => 'EVMOS',
        CoinType.nativeInjective => 'INJ',
        // CoinType.nativeZetaChain => 'ZETA',
        CoinType.near => 'NEAR',
        // CoinType.nebl => 'NEBL',
        CoinType.nebulas => 'NAS',
        CoinType.neo => 'NEO',
        // CoinType.neon => 'NEON',
        CoinType.nervos => 'CKB',
        CoinType.neutron => 'NEUTRON',
        CoinType.nimiq => 'NIM',
        CoinType.noble => 'NOBL',
        CoinType.nuls => 'NULS',
        CoinType.oasis => 'ROSE',
        CoinType.okxchain => 'OKT',
        CoinType.ontology => 'ONT',
        // CoinType.opBNB => 'OPBNB',
        CoinType.optimism => 'OETH',
        CoinType.osmosis => 'OSMO',
        CoinType.persistence => 'XPRT',
        // CoinType.pivx => 'PIVX',
        CoinType.poanetwork => 'POA',
        CoinType.polkadot => 'DOT',
        CoinType.polygon => 'MATIC',
        CoinType.polygonzkEVM => 'MATIC',
        CoinType.qtum => 'QTUM',
        CoinType.quasar => 'QUASAR',
        CoinType.ravencoin => 'RVN',
        CoinType.ronin => 'RON',
        // CoinType.rootstock => 'RBTC',
        // CoinType.scroll => 'SCRL',
        CoinType.secret => 'SCRT',
        // CoinType.sei => 'SEI',
        CoinType.smartBitcoinCash => 'BCH',
        CoinType.smartChain => 'BNB',
        CoinType.smartChainLegacy => 'BNB',
        CoinType.solana => 'SOL',
        CoinType.sommelier => 'SLP',
        CoinType.stargaze => 'STGZ',
        CoinType.stellar => 'XLM',
        // CoinType.stratis => 'STRAX',
        CoinType.stride => 'STRIDE',
        CoinType.sui => 'SUI',
        // CoinType.syscoin => 'SYS',
        // CoinType.tBinance => 'BNB',
        CoinType.terra => 'LUNA',
        CoinType.terraV2 => 'LUNA',
        CoinType.tezos => 'XTZ',
        CoinType.theta => 'THETA',
        // CoinType.thetaFuel => 'TFUEL',
        CoinType.thorchain => 'RUNE',
        CoinType.thunderCore => 'TT',
        // CoinType.tia => 'TIA',
        CoinType.ton => 'TON',
        CoinType.tron => 'TRX',
        CoinType.umee => 'UMEE',
        CoinType.veChain => 'VET',
        // CoinType.verge => 'XVG',
        CoinType.viacoin => 'VIA',
        // CoinType.viction => 'VCT',
        CoinType.wanchain => 'WAN',
        CoinType.waves => 'WAVES',
        CoinType.wax => 'WAX',
        CoinType.xdai => 'xDAI',
        CoinType.xrp => 'XRP',
        CoinType.zcash => 'ZEC',
        CoinType.zelcash => 'ZEL',
        // CoinType.zen => 'ZEN',
        // CoinType.zenEON => 'ZEON',
        // CoinType.zetaEVM => 'ZETA',
        CoinType.zilliqa => 'ZIL',
        // CoinType.zkLinkNova => 'ZKLN',
        CoinType.zksync => 'ZKS',
        // TODO: Handle this case.
        CoinType.tomoChain => throw UnimplementedError(),
      };
}
